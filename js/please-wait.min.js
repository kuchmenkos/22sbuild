!function(n,i){"object"==typeof exports?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(n)}(this,function(n){var i,t,o,l,e,a,s,d,r,m,g,h,u,c,p,_;for(s in a=document.createElement("fakeelement"),l=!1,u=!1,o="animationend",h=null,e="Webkit Moz O ms".split(" "),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"})if(c=g[s],null!=a.style[s]){h=c,u=!0;break}if(null!=a.style.animationName&&(l=!0),!l)for(p=0,_=e.length;_>p;p++)if(d=e[p],null!=a.style[d+"AnimationName"]){switch(d){case"Webkit":o="webkitAnimationEnd";break;case"Moz":o="animationend";break;case"O":o="oanimationend";break;case"ms":o="MSAnimationEnd"}l=!0;break}return t=function(n,i){return i.classList?i.classList.add(n):i.className+=" "+n},m=function(n,i){return i.classList?i.classList.remove(n):i.className=i.className.replace(n,"").trim()},i=function(){function n(n){var i,e,a,s;for(e in i=this.constructor._defaultOptions,this.options={},this.loaded=!1,this.finishing=!1,i)s=i[e],this.options[e]=null!=n[e]?n[e]:s;this._loadingElem=document.createElement("div"),this._loadingHtmlToDisplay=[],this._loadingElem.className="pg-loading-screen",null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this._loadingHtmlElem=this._loadingElem.getElementsByClassName("pg-loading-html")[0],null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this._readyToShowLoadingHtml=!1,this._logoElem=this._loadingElem.getElementsByClassName("pg-loading-logo")[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo),m("pg-loaded",document.body),t("pg-loading",document.body),document.body.appendChild(this._loadingElem),t("pg-loading",this._loadingElem),this._onLoadedCallback=this.options.onLoadedCallback,a=function(n){return function(i){return n.loaded=!0,n._readyToShowLoadingHtml=!0,t("pg-loaded",n._loadingHtmlElem),l&&n._loadingHtmlElem.removeEventListener(o,a),n._loadingHtmlToDisplay.length>0&&n._changeLoadingHtml(),n.finishing?(null!=i&&i.stopPropagation(),n._finish()):void 0}}(this),null!=this._loadingHtmlElem&&(l?this._loadingHtmlElem.addEventListener(o,a):a(),this._loadingHtmlListener=function(n){return function(){return n._readyToShowLoadingHtml=!0,m("pg-loading",n._loadingHtmlElem),u&&n._loadingHtmlElem.removeEventListener(h,n._loadingHtmlListener),n._loadingHtmlToDisplay.length>0?n._changeLoadingHtml():void 0}}(this),this._removingHtmlListener=function(n){return function(){return n._loadingHtmlElem.innerHTML=n._loadingHtmlToDisplay.shift(),m("pg-removing",n._loadingHtmlElem),t("pg-loading",n._loadingHtmlElem),u?(n._loadingHtmlElem.removeEventListener(h,n._removingHtmlListener),n._loadingHtmlElem.addEventListener(h,n._loadingHtmlListener)):n._loadingHtmlListener()}}(this))}return n._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:"<div class='pg-loading-inner'>\n  <div class='pg-loading-center-outer'>\n    <div class='pg-loading-center-middle'>\n      <h1 class='pg-loading-logo-header'>\n        <img class='pg-loading-logo'></img>\n      </h1>\n      <div class='pg-loading-html'>\n      </div>\n    </div>\n  </div>\n</div>",onLoadedCallback:null},n.prototype.finish=function(n,i){return null==n&&(n=!1),window.document.hidden&&(n=!0),this.finishing=!0,null!=i&&this.updateOption("onLoadedCallback",i),this.loaded||n?this._finish(n):void 0},n.prototype.updateOption=function(n,i){switch(n){case"backgroundColor":return this._loadingElem.style.backgroundColor=i;case"logo":return this._logoElem.src=i;case"loadingHtml":return this.updateLoadingHtml(i);case"onLoadedCallback":return this._onLoadedCallback=i;default:throw new Error("Unknown option '"+n+"'")}},n.prototype.updateOptions=function(n){var i,t,o;for(i in null==n&&(n={}),o=[],n)t=n[i],o.push(this.updateOption(i,t));return o},n.prototype.updateLoadingHtml=function(n,i){if(null==i&&(i=!1),null==this._loadingHtmlElem)throw new Error("The loading template does not have an element of class 'pg-loading-html'");return i?(this._loadingHtmlToDisplay=[n],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(n),this._readyToShowLoadingHtml?this._changeLoadingHtml():void 0},n.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(h,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(h,this._removingHtmlListener),m("pg-loading",this._loadingHtmlElem),m("pg-removing",this._loadingHtmlElem),u?(t("pg-removing",this._loadingHtmlElem),this._loadingHtmlElem.addEventListener(h,this._removingHtmlListener)):this._removingHtmlListener()},n.prototype._finish=function(n){var i;return null==n&&(n=!1),null!=this._loadingElem?(t("pg-loaded",document.body),"function"==typeof this._onLoadedCallback&&this._onLoadedCallback.apply(this),i=function(n){return function(){return document.body.removeChild(n._loadingElem),m("pg-loading",document.body),l&&n._loadingElem.removeEventListener(o,i),n._loadingElem=null}}(this),!n&&l?(t("pg-loaded",this._loadingElem),this._loadingElem.addEventListener(o,i)):i()):void 0},n}(),r=function(n){return null==n&&(n={}),new i(n)},n.pleaseWait=r,r});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsZWFzZS13YWl0Lm1pbi5qcyJdLCJuYW1lcyI6WyJhIiwiYiIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiYyIsImQiLCJlIiwiZiIsImciLCJoIiwiaSIsImoiLCJrIiwibCIsIm0iLCJuIiwibyIsInAiLCJxIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3BsaXQiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwibXNUcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsInN0eWxlIiwiYW5pbWF0aW9uTmFtZSIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsImNsYXNzTmFtZSIsInJlbW92ZSIsInJlcGxhY2UiLCJ0cmltIiwiY29uc3RydWN0b3IiLCJfZGVmYXVsdE9wdGlvbnMiLCJvcHRpb25zIiwibG9hZGVkIiwiZmluaXNoaW5nIiwiX2xvYWRpbmdFbGVtIiwiX2xvYWRpbmdIdG1sVG9EaXNwbGF5IiwiYmFja2dyb3VuZENvbG9yIiwiaW5uZXJIVE1MIiwidGVtcGxhdGUiLCJfbG9hZGluZ0h0bWxFbGVtIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxvYWRpbmdIdG1sIiwiX3JlYWR5VG9TaG93TG9hZGluZ0h0bWwiLCJfbG9nb0VsZW0iLCJzcmMiLCJsb2dvIiwiYm9keSIsImFwcGVuZENoaWxkIiwiX29uTG9hZGVkQ2FsbGJhY2siLCJvbkxvYWRlZENhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jaGFuZ2VMb2FkaW5nSHRtbCIsInN0b3BQcm9wYWdhdGlvbiIsIl9maW5pc2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2xvYWRpbmdIdG1sTGlzdGVuZXIiLCJfcmVtb3ZpbmdIdG1sTGlzdGVuZXIiLCJzaGlmdCIsInByb3RvdHlwZSIsImZpbmlzaCIsIndpbmRvdyIsImhpZGRlbiIsInVwZGF0ZU9wdGlvbiIsInVwZGF0ZUxvYWRpbmdIdG1sIiwiRXJyb3IiLCJ1cGRh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b250ZW50IjpbIi8qKlxuKiBwbGVhc2Utd2FpdFxuKiBEaXNwbGF5IGEgbmljZSBsb2FkaW5nIHNjcmVlbiB3aGlsZSB5b3VyIGFwcCBsb2Fkc1xuXG4qIEBhdXRob3IgUGF0aGdhdGhlciA8dGVjaEBwYXRoZ2F0aGVyLmNvbT5cbiogQGNvcHlyaWdodCBQYXRoZ2F0aGVyIDIwMTVcbiogQGxpY2Vuc2UgTUlUIDxodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwPlxuKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vUGF0aGdhdGhlci9wbGVhc2Utd2FpdFxuKiBAbW9kdWxlIHBsZWFzZS13YWl0XG4qIEB2ZXJzaW9uIDAuMC41XG4qL1xuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/YihleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sYik6YihhKX0odGhpcyxmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscTtnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmYWtlZWxlbWVudFwiKSxlPSExLG49ITEsZD1cImFuaW1hdGlvbmVuZFwiLG09bnVsbCxmPVwiV2Via2l0IE1veiBPIG1zXCIuc3BsaXQoXCIgXCIpLGw9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kXCIsbXNUcmFuc2l0aW9uOlwiTVNUcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn07Zm9yKGggaW4gbClpZihvPWxbaF0sbnVsbCE9Zy5zdHlsZVtoXSl7bT1vLG49ITA7YnJlYWt9aWYobnVsbCE9Zy5zdHlsZS5hbmltYXRpb25OYW1lJiYoZT0hMCksIWUpZm9yKHA9MCxxPWYubGVuZ3RoO3E+cDtwKyspaWYoaT1mW3BdLG51bGwhPWcuc3R5bGVbXCJcIitpK1wiQW5pbWF0aW9uTmFtZVwiXSl7c3dpdGNoKGkpe2Nhc2VcIldlYmtpdFwiOmQ9XCJ3ZWJraXRBbmltYXRpb25FbmRcIjticmVhaztjYXNlXCJNb3pcIjpkPVwiYW5pbWF0aW9uZW5kXCI7YnJlYWs7Y2FzZVwiT1wiOmQ9XCJvYW5pbWF0aW9uZW5kXCI7YnJlYWs7Y2FzZVwibXNcIjpkPVwiTVNBbmltYXRpb25FbmRcIn1lPSEwO2JyZWFrfXJldHVybiBjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuY2xhc3NMaXN0P2IuY2xhc3NMaXN0LmFkZChhKTpiLmNsYXNzTmFtZSs9XCIgXCIrYX0saz1mdW5jdGlvbihhLGIpe3JldHVybiBiLmNsYXNzTGlzdD9iLmNsYXNzTGlzdC5yZW1vdmUoYSk6Yi5jbGFzc05hbWU9Yi5jbGFzc05hbWUucmVwbGFjZShhLFwiXCIpLnRyaW0oKX0sYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGIsZixnLGg7Yj10aGlzLmNvbnN0cnVjdG9yLl9kZWZhdWx0T3B0aW9ucyx0aGlzLm9wdGlvbnM9e30sdGhpcy5sb2FkZWQ9ITEsdGhpcy5maW5pc2hpbmc9ITE7Zm9yKGYgaW4gYiloPWJbZl0sdGhpcy5vcHRpb25zW2ZdPW51bGwhPWFbZl0/YVtmXTpoO3RoaXMuX2xvYWRpbmdFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fbG9hZGluZ0h0bWxUb0Rpc3BsYXk9W10sdGhpcy5fbG9hZGluZ0VsZW0uY2xhc3NOYW1lPVwicGctbG9hZGluZy1zY3JlZW5cIixudWxsIT10aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yJiYodGhpcy5fbG9hZGluZ0VsZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpLHRoaXMuX2xvYWRpbmdFbGVtLmlubmVySFRNTD10aGlzLm9wdGlvbnMudGVtcGxhdGUsdGhpcy5fbG9hZGluZ0h0bWxFbGVtPXRoaXMuX2xvYWRpbmdFbGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwZy1sb2FkaW5nLWh0bWxcIilbMF0sbnVsbCE9dGhpcy5fbG9hZGluZ0h0bWxFbGVtJiYodGhpcy5fbG9hZGluZ0h0bWxFbGVtLmlubmVySFRNTD10aGlzLm9wdGlvbnMubG9hZGluZ0h0bWwpLHRoaXMuX3JlYWR5VG9TaG93TG9hZGluZ0h0bWw9ITEsdGhpcy5fbG9nb0VsZW09dGhpcy5fbG9hZGluZ0VsZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBnLWxvYWRpbmctbG9nb1wiKVswXSxudWxsIT10aGlzLl9sb2dvRWxlbSYmKHRoaXMuX2xvZ29FbGVtLnNyYz10aGlzLm9wdGlvbnMubG9nbyksayhcInBnLWxvYWRlZFwiLGRvY3VtZW50LmJvZHkpLGMoXCJwZy1sb2FkaW5nXCIsZG9jdW1lbnQuYm9keSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9sb2FkaW5nRWxlbSksYyhcInBnLWxvYWRpbmdcIix0aGlzLl9sb2FkaW5nRWxlbSksdGhpcy5fb25Mb2FkZWRDYWxsYmFjaz10aGlzLm9wdGlvbnMub25Mb2FkZWRDYWxsYmFjayxnPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5sb2FkZWQ9ITAsYS5fcmVhZHlUb1Nob3dMb2FkaW5nSHRtbD0hMCxjKFwicGctbG9hZGVkXCIsYS5fbG9hZGluZ0h0bWxFbGVtKSxlJiZhLl9sb2FkaW5nSHRtbEVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLGcpLGEuX2xvYWRpbmdIdG1sVG9EaXNwbGF5Lmxlbmd0aD4wJiZhLl9jaGFuZ2VMb2FkaW5nSHRtbCgpLGEuZmluaXNoaW5nPyhudWxsIT1iJiZiLnN0b3BQcm9wYWdhdGlvbigpLGEuX2ZpbmlzaCgpKTp2b2lkIDB9fSh0aGlzKSxudWxsIT10aGlzLl9sb2FkaW5nSHRtbEVsZW0mJihlP3RoaXMuX2xvYWRpbmdIdG1sRWxlbS5hZGRFdmVudExpc3RlbmVyKGQsZyk6ZygpLHRoaXMuX2xvYWRpbmdIdG1sTGlzdGVuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuX3JlYWR5VG9TaG93TG9hZGluZ0h0bWw9ITAsayhcInBnLWxvYWRpbmdcIixhLl9sb2FkaW5nSHRtbEVsZW0pLG4mJmEuX2xvYWRpbmdIdG1sRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKG0sYS5fbG9hZGluZ0h0bWxMaXN0ZW5lciksYS5fbG9hZGluZ0h0bWxUb0Rpc3BsYXkubGVuZ3RoPjA/YS5fY2hhbmdlTG9hZGluZ0h0bWwoKTp2b2lkIDB9fSh0aGlzKSx0aGlzLl9yZW1vdmluZ0h0bWxMaXN0ZW5lcj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5fbG9hZGluZ0h0bWxFbGVtLmlubmVySFRNTD1hLl9sb2FkaW5nSHRtbFRvRGlzcGxheS5zaGlmdCgpLGsoXCJwZy1yZW1vdmluZ1wiLGEuX2xvYWRpbmdIdG1sRWxlbSksYyhcInBnLWxvYWRpbmdcIixhLl9sb2FkaW5nSHRtbEVsZW0pLG4/KGEuX2xvYWRpbmdIdG1sRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKG0sYS5fcmVtb3ZpbmdIdG1sTGlzdGVuZXIpLGEuX2xvYWRpbmdIdG1sRWxlbS5hZGRFdmVudExpc3RlbmVyKG0sYS5fbG9hZGluZ0h0bWxMaXN0ZW5lcikpOmEuX2xvYWRpbmdIdG1sTGlzdGVuZXIoKX19KHRoaXMpKX1yZXR1cm4gYS5fZGVmYXVsdE9wdGlvbnM9e2JhY2tncm91bmRDb2xvcjpudWxsLGxvZ286bnVsbCxsb2FkaW5nSHRtbDpudWxsLHRlbXBsYXRlOlwiPGRpdiBjbGFzcz0ncGctbG9hZGluZy1pbm5lcic+XFxuICA8ZGl2IGNsYXNzPSdwZy1sb2FkaW5nLWNlbnRlci1vdXRlcic+XFxuICAgIDxkaXYgY2xhc3M9J3BnLWxvYWRpbmctY2VudGVyLW1pZGRsZSc+XFxuICAgICAgPGgxIGNsYXNzPSdwZy1sb2FkaW5nLWxvZ28taGVhZGVyJz5cXG4gICAgICAgIDxpbWcgY2xhc3M9J3BnLWxvYWRpbmctbG9nbyc+PC9pbWc+XFxuICAgICAgPC9oMT5cXG4gICAgICA8ZGl2IGNsYXNzPSdwZy1sb2FkaW5nLWh0bWwnPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlwiLG9uTG9hZGVkQ2FsbGJhY2s6bnVsbH0sYS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEmJihhPSExKSx3aW5kb3cuZG9jdW1lbnQuaGlkZGVuJiYoYT0hMCksdGhpcy5maW5pc2hpbmc9ITAsbnVsbCE9YiYmdGhpcy51cGRhdGVPcHRpb24oXCJvbkxvYWRlZENhbGxiYWNrXCIsYiksdGhpcy5sb2FkZWR8fGE/dGhpcy5fZmluaXNoKGEpOnZvaWQgMH0sYS5wcm90b3R5cGUudXBkYXRlT3B0aW9uPWZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2VcImJhY2tncm91bmRDb2xvclwiOnJldHVybiB0aGlzLl9sb2FkaW5nRWxlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9YjtjYXNlXCJsb2dvXCI6cmV0dXJuIHRoaXMuX2xvZ29FbGVtLnNyYz1iO2Nhc2VcImxvYWRpbmdIdG1sXCI6cmV0dXJuIHRoaXMudXBkYXRlTG9hZGluZ0h0bWwoYik7Y2FzZVwib25Mb2FkZWRDYWxsYmFja1wiOnJldHVybiB0aGlzLl9vbkxvYWRlZENhbGxiYWNrPWI7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG9wdGlvbiAnXCIrYStcIidcIil9fSxhLnByb3RvdHlwZS51cGRhdGVPcHRpb25zPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtudWxsPT1hJiYoYT17fSksZD1bXTtmb3IoYiBpbiBhKWM9YVtiXSxkLnB1c2godGhpcy51cGRhdGVPcHRpb24oYixjKSk7cmV0dXJuIGR9LGEucHJvdG90eXBlLnVwZGF0ZUxvYWRpbmdIdG1sPWZ1bmN0aW9uKGEsYil7aWYobnVsbD09YiYmKGI9ITEpLG51bGw9PXRoaXMuX2xvYWRpbmdIdG1sRWxlbSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgbG9hZGluZyB0ZW1wbGF0ZSBkb2VzIG5vdCBoYXZlIGFuIGVsZW1lbnQgb2YgY2xhc3MgJ3BnLWxvYWRpbmctaHRtbCdcIik7cmV0dXJuIGI/KHRoaXMuX2xvYWRpbmdIdG1sVG9EaXNwbGF5PVthXSx0aGlzLl9yZWFkeVRvU2hvd0xvYWRpbmdIdG1sPSEwKTp0aGlzLl9sb2FkaW5nSHRtbFRvRGlzcGxheS5wdXNoKGEpLHRoaXMuX3JlYWR5VG9TaG93TG9hZGluZ0h0bWw/dGhpcy5fY2hhbmdlTG9hZGluZ0h0bWwoKTp2b2lkIDB9LGEucHJvdG90eXBlLl9jaGFuZ2VMb2FkaW5nSHRtbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWFkeVRvU2hvd0xvYWRpbmdIdG1sPSExLHRoaXMuX2xvYWRpbmdIdG1sRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKG0sdGhpcy5fbG9hZGluZ0h0bWxMaXN0ZW5lciksdGhpcy5fbG9hZGluZ0h0bWxFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIobSx0aGlzLl9yZW1vdmluZ0h0bWxMaXN0ZW5lciksayhcInBnLWxvYWRpbmdcIix0aGlzLl9sb2FkaW5nSHRtbEVsZW0pLGsoXCJwZy1yZW1vdmluZ1wiLHRoaXMuX2xvYWRpbmdIdG1sRWxlbSksbj8oYyhcInBnLXJlbW92aW5nXCIsdGhpcy5fbG9hZGluZ0h0bWxFbGVtKSx0aGlzLl9sb2FkaW5nSHRtbEVsZW0uYWRkRXZlbnRMaXN0ZW5lcihtLHRoaXMuX3JlbW92aW5nSHRtbExpc3RlbmVyKSk6dGhpcy5fcmVtb3ZpbmdIdG1sTGlzdGVuZXIoKX0sYS5wcm90b3R5cGUuX2ZpbmlzaD1mdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YSYmKGE9ITEpLG51bGwhPXRoaXMuX2xvYWRpbmdFbGVtPyhjKFwicGctbG9hZGVkXCIsZG9jdW1lbnQuYm9keSksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fb25Mb2FkZWRDYWxsYmFjayYmdGhpcy5fb25Mb2FkZWRDYWxsYmFjay5hcHBseSh0aGlzKSxiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEuX2xvYWRpbmdFbGVtKSxrKFwicGctbG9hZGluZ1wiLGRvY3VtZW50LmJvZHkpLGUmJmEuX2xvYWRpbmdFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxiKSxhLl9sb2FkaW5nRWxlbT1udWxsfX0odGhpcyksIWEmJmU/KGMoXCJwZy1sb2FkZWRcIix0aGlzLl9sb2FkaW5nRWxlbSksdGhpcy5fbG9hZGluZ0VsZW0uYWRkRXZlbnRMaXN0ZW5lcihkLGIpKTpiKCkpOnZvaWQgMH0sYX0oKSxqPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hJiYoYT17fSksbmV3IGIoYSl9LGEucGxlYXNlV2FpdD1qLGp9KTsiXX0=
